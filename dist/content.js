chrome.runtime.onMessage.addListener((function(e,t,o){"applySettings"===e.action&&chrome.storage.local.get("settings",(function(e){if(e.settings){const o=e.settings;!function(){document.body.style.filter="",document.body.style.fontFamily="",document.body.style.lineHeight="",document.body.style.letterSpacing="",document.body.style.fontSize="",document.body.style.color="",document.body.style.zoom="1";let e=document.getElementById("tunnel-vision-overlay");e&&e.remove();let t=document.getElementById("blurry-vision-overlay");t&&t.remove(),document.onmousemove=null,document.onmouseleave=null,document.body.style.clipPath="none",document.body.style.transform="none",document.body.style.fontWeight="normal",document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, li, a, span").forEach((e=>{e.style.fontFamily="",e.style.lineHeight="",e.style.letterSpacing="",e.style.fontSize="",e.style.color=""}))}(),o.dyslexia&&function(){console.log("Applying Dyslexia styles...");const e=chrome.runtime.getURL("fonts/OpenDyslexic-Regular.woff");new FontFace("OpenDyslexic",`url(${e})`).load().then((function(e){document.fonts.add(e),document.body.style.fontFamily="'OpenDyslexic', Arial, sans-serif",document.body.style.lineHeight="2",document.body.style.letterSpacing="0.1em",document.body.style.fontSize="18px",document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, li, a, span").forEach((e=>{e.style.fontFamily="'OpenDyslexic', Arial, sans-serif",e.style.lineHeight="2",e.style.letterSpacing="0.1em",e.style.fontSize="18px"}))})).catch((function(e){console.error("Error loading the font: ",e)}))}(),o.colorBlindness&&(document.body.insertAdjacentHTML("beforeend",'\n        <svg id="colorBlindSVG" xmlns="http://www.w3.org/2000/svg" style="display:none;">\n            <defs>\n                <filter id="protanopia">\n                    <feColorMatrix type="matrix" values="0.567, 0.433, 0, 0, 0, 0.558, 0.442, 0, 0, 0, 0, 0.242, 0.758, 0, 0, 0, 0, 0, 1, 0"/>\n                </filter>\n                <filter id="deuteranopia">\n                    <feColorMatrix type="matrix" values="0.625, 0.375, 0, 0, 0, 0.7, 0.3, 0, 0, 0, 0.3, 0.7, 0, 0, 0, 0, 0, 1, 0"/>\n                </filter>\n                <filter id="tritanopia">\n                    <feColorMatrix type="matrix" values="0.95, 0.05, 0, 0, 0, 0, 0.433, 0.567, 0, 0, 0, 0.475, 0.525, 0, 0, 0, 0, 0, 0, 1, 0"/>\n                </filter>\n                <filter id="achromatopsia">\n                    <feColorMatrix type="matrix" values="0.299, 0.587, 0.114, 0, 0, 0.299, 0.587, 0.114, 0, 0, 0.299, 0.587, 0.114, 0, 0, 0, 0, 0, 1, 0"/>\n                </filter>\n            </defs>\n        </svg>'),t=o.colorBlindnessType,document.body.style.filter=t?`url(#${t})`:"none"),o.tremorDisorder&&(document.body.style.fontSize="20px"),o.tunnelVision&&function(){let e=document.getElementById("tunnel-vision-overlay");e||(e=document.createElement("div"),e.id="tunnel-vision-overlay",document.body.appendChild(e),e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.95)",e.style.pointerEvents="none",e.style.zIndex="9999",e.style.clipPath="circle(150px at 50% 50%)"),document.onmousemove=function(t){let o=t.clientX,n=t.clientY;e.style.clipPath=`circle(150px at ${o}px ${n}px)`},document.body.style.color="#FFFFFF"}(),o.lowVision&&null!==o.diopterValue&&function(e){let t;document.body.style.lineHeight="1.8";const o="url('https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/svgs/solid/mouse-pointer.svg'), auto";document.body.style.cursor=o,t=e>=0&&e<=1.5?"16px":e>1.5&&e<=3?"14px":e>3&&e<=5?"12px":e>5&&e<=7.5?"10px":e>7.5?"8px":e>=-1?"16px":e>=-2.5?"18px":e>=-5?"20px":e>=-7.5?"24px":e>=-10?"30px":"8px",document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, li, a, span").forEach((e=>{e.style.fontFamily="Arial, Verdana, sans-serif",e.style.lineHeight="1.5",e.style.letterSpacing="1.5px",e.style.fontSize=t,e.style.fontWeight="bold",e.style.cursor=o})),document.querySelectorAll("a").forEach((e=>{e.style.color="#3399ff",e.addEventListener("mouseover",(()=>{e.style.color="#0066cc"})),e.addEventListener("mouseout",(()=>{e.style.color="#3399ff"})),e.style.cursor=o}))}(o.diopterValue)}var t}))}));